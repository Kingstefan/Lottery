!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.hasCookies=function(){var e=new a;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(e){return!1}};var o=function(e){return e&&e.__esModule?e:{default:e}}(n(12));var r="lS_",a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cookieOptions=Object.assign({path:"/"},t),r=void 0===t.prefix?r:t.prefix}return i(e,[{key:"getItem",value:function(e){var t=o.default.parse(document.cookie);return t&&t.hasOwnProperty(r+e)?t[r+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=o.default.serialize(r+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=Object.assign({},this.cookieOptions,{maxAge:-1});return document.cookie=o.default.serialize(r+e,"",t),null}},{key:"clear",value:function(){var e=o.default.parse(document.cookie);for(var t in e)0===t.indexOf(r)&&this.removeItem(t.substr(r.length));return null}}]),e}();t.default=a},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}},function(e,t,n){"use strict";n.r(t),function(e){var i=n(2),o=setTimeout;function r(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void c(t.promise,e)}l(t.promise,i)}else(1===e._state?l:c)(t.promise,e._value)})):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void d(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,l(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(r);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},a.prototype.finally=i.a,a.all=function(e){return new a(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var o=i.length;function r(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){r(e,t)},n)}i[e]=a,0==--o&&t(i)}catch(e){n(e)}}for(var a=0;a<i.length;a++)r(a,i[a])})},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){o(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.default=a}.call(this,n(4).setImmediate)},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(5),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,o=1,r={},a=!1,s=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){u(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},i=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;i=function(t){var n=s.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():i=function(e){setTimeout(u,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return r[o]=a,i(o),o++},l.clearImmediate=c}function c(e){delete r[e]}function u(e){if(a)setTimeout(u,0,e);else{var t=r[e];if(t){a=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{c(e),a=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(6))},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],u=!1,d=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)data&&data.length>0&&(__p+='\r\n    <ul class="gird-wrap">\r\n        <li class="action gird"></li>\r\n        ',data.forEach(function(e,t){__p+='\r\n            <li class="item-'+(null==(__t=t+1)?"":__t)+' gird" data-seq="'+(null==(__t=e.seq)?"":__t)+'">\r\n                <img src="'+(null==(__t=e.image)?"":__t)+'" alt="">\r\n            </li>\r\n        '}),__p+="\r\n    </ul>\r\n"),__p+="\r\n\r\n\r\n\r\n\r\n";return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<div class="records">\r\n    ',records&&records.length>0?(__p+='\r\n        <div class="record-th">\r\n            <span class="name-th">奖品名称</span>\r\n            <span class="time-th">中奖时间</span>\r\n        </div>\r\n        <ul class="record-tr">\r\n            ',records.forEach(function(e){__p+='\r\n                <li class="record">\r\n                    <span class="name-tr">'+(null==(__t=e.name)?"":__t)+'</span>\r\n                    <span class="time-tr">'+(null==(__t=e.time)?"":__t)+"</span>\r\n                </li>\r\n            "}),__p+="\r\n        </ul>\r\n    "):__p+='\r\n        <div class="no-record">暂无中奖纪录，快去抽奖吧</div>\r\n    ',__p+='\r\n</div>\r\n<div class="fixed-tips"></div>\r\n';return __p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canSessionStorage=t.canLocalStorage=t.CookieStorage=t.isSupported=void 0;var i=n(10),o=null;(0,i.isSupported)("localStorage")?o=window.localStorage:(0,i.isSupported)("cookieStorage")&&(o=new i.CookieStorage);t.default=o,t.isSupported=i.isSupported,t.CookieStorage=i.CookieStorage,t.canLocalStorage=function(){return(0,i.isSupported)("localStorage")},t.canSessionStorage=function(){return(0,i.isSupported)("sessionStorage")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=t.CookieStorage=t.isSupported=t.storage=void 0;var i=a(n(11)),o=a(n(1)),r=a(n(13));function a(e){return e&&e.__esModule?e:{default:e}}var s=null;(0,i.default)("localStorage")?t.storage=s=window.localStorage:(0,i.default)("sessionStorage")?t.storage=s=window.sessionStorage:(0,i.default)("cookieStorage")?t.storage=s=new o.default:t.storage=s=new r.default,t.default=s,t.storage=s,t.isSupported=i.default,t.CookieStorage=o.default,t.MemoryStorage=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return r("localStorage");if("session"===t)return r("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=n(1),o="__test";function r(e){try{var t=window[e];return t.setItem(o,"1"),t.removeItem(o),!0}catch(e){return!1}}},function(e,t,n){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},o=t||{},a=e.split(r),l=o.decode||i,c=0;c<a.length;c++){var u=a[c],d=u.indexOf("=");if(!(d<0)){var f=u.substr(0,d).trim(),p=u.substr(++d,u.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==n[f]&&(n[f]=s(p,l))}}return n},t.serialize=function(e,t,n){var i=n||{},r=i.encode||o;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");var s=r(t);if(s&&!a.test(s))throw new TypeError("argument val is invalid");var l=e+"="+s;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(c)}if(i.domain){if(!a.test(i.domain))throw new TypeError("option domain is invalid");l+="; Domain="+i.domain}if(i.path){if(!a.test(i.path))throw new TypeError("option path is invalid");l+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+i.expires.toUTCString()}i.httpOnly&&(l+="; HttpOnly");i.secure&&(l+="; Secure");if(i.sameSite){var u="string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite;switch(u){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return l};var i=decodeURIComponent,o=encodeURIComponent,r=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function s(e,t){try{return t(e)}catch(t){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return i(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:null}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=o},function(e,t,n){"use strict";n(15),n(17);var i=l(n(3)),o=l(n(7)),r=l(n(8)),a=l(n(20)),s=n(9);function l(e){return e&&e.__esModule?e:{default:e}}!function(e){var t=function(t,n){this.$ele=n,this.defaults={index:0,speed:280,times:0,circle:4,prize:-1,totleTimes:64,id:5,loginUrl:"/customer/account/login/referer/"+this.encode_base64(window.location.href)},this.timer=null,this.isLottery=!0,this.isActive=!0,this.element={},this.ajax={url:{detailUrl:"/activity/lucky-draw/detail",listUrl:"/activity/lucky-draw/award-list",timesUrl:"/activity/lucky-draw/times",drawUrl:"/activity/lucky-draw/draw",recordUrl:"/activity/lucky-draw/my-award-list",addrUrl:"/activity/lucky-draw/update-address"}},this.tips={lost_tips:"",ineligible_tips:""},this.opts=e.extend({},this.defaults,t),this.init()};t.prototype={constructor:t,init:function(){this.initViews(),this.action(),this.observeRecord(),this.checkInput()},ajaxRequest:function(t,n,o){var r=this;return new i.default(function(i,a){e.ajax({url:t,type:n,data:o,dataType:"json"}).then(function(e){e.status-0==200?i(e):204===e.status?easyDialog.open({container:{header:"提示",content:'<p class="lottery-tips">您还未登录，请前往登录</p>',yesText:"前往登录",yesFn:function(){window.location.href=r.opts.loginUrl}}}):a(e.message)}).fail(function(e){a(e.statusText)})})},initViews:function(){var e=this,t=function(e){return s.canSessionStorage&&!sessionStorage.getItem(e)||!s.canSessionStorage},n=["girds","list","rules"];e.ajaxRequest(e.ajax.url.detailUrl,"GET",{id:e.opts.id}).then(function(i){var r=t(n[0])?(0,o.default)({data:i.data.prizes}):sessionStorage.getItem(n[0]);if(e.$ele.find(".lottery-girdview").html(r),s.canSessionStorage&&sessionStorage.setItem(n[0],(0,o.default)({data:i.data.prizes})),e.tips.lost_tips=i.data.lost_tips,e.tips.ineligible_tips=i.data.ineligible_tips,i.data.status+0!=6)return e.isActive=!1,e.$ele.find(".action").addClass("activity-over"),e.isActive;e.element.item=e.$ele.find(".gird")}).catch(function(e){return console.log("九宫格图片获取异常"+e)}),t(n[1])?e.ajaxRequest(e.ajax.url.listUrl,"GET",{id:e.opts.id}).then(function(t){t.data.length>0&&(e.$ele.find(".list-wrap").html(listTpl({data:t.data})),s.canSessionStorage&&sessionStorage.setItem(n[1],listTpl({data:t.data})),e.element.list=e.$ele.find(".list"),e.loopPlay())}).catch(function(e){return console.log("中奖名单获取异常"+e)}):(e.$ele.find(".list-wrap").html(sessionStorage.getItem(n[1])),e.element.list=e.$ele.find(".list"),e.loopPlay())},encode_base64:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",i=e.length,o=void 0,r=void 0,a=0;i-- >0;){if(o=e.charCodeAt(a++),n+=t.charAt(o>>2&63),i--<=0){n+=t.charAt(o<<4&63),n+="==";break}if(r=e.charCodeAt(a++),n+=t.charAt(63&(o<<4|r>>4&15)),i--<=0){n+=t.charAt(r<<2&63),n+="=";break}o=e.charCodeAt(a++),n+=t.charAt(63&(r<<2|o>>6&3)),n+=t.charAt(63&o)}return n},checkInput:function(){var t={name:[[/^\s*$/,/^[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\d]{2,40}$/,/^\S{41,}|^\S{1}$/,/^[\u4e00-\u9fa5a-zA-z]{2,40}$/],["请填写收货人姓名","请填写真实姓名","最少2个字符，最多40个字符","您的输入正确，请继续"]],tel:[[/^\s*$/,/\D+/,/^\d{21,}|^\d{1,5}$/,/^\d{6,20}$/],["请填写手机号码","手机号码格式错误","6-20个数字","您的输入正确，请继续"]],addr:[[/^\s*$/,/^[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\w]{8,100}$/,/^\S{101,}|^\S{1,7}$/,/[\u4e00-\u9fa5]+[\u4e00-\u9fa5`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\w]{7,100}$/],["请填写详细地址","请填写真实收货人地址","最少8个字符，最多100个字符","您的输入正确，请继续"]]};e("body").on("blur",".input-field",function(){var n=e(this).data("action"),i=t[n],o=e(this).val(),r=e(this).siblings(".error-tips");i[0].map(function(e,t){e.test(o.trim())&&(r.show().html(i[1][t]),3===t&&r.hide())})})},saveAddress:function(t){var n=e(".easyDialog_wrapper"),i=n.find(".fixed-tips"),o=!1,r=[{rule:/^\s*$/,msg:["请填写收货人姓名","请填写手机号码","请填写详细地址"]},/^[\u4e00-\u9fa5a-zA-z]{2,40}$/,/^\d{6,20}$/,/[\u4e00-\u9fa5]+[\u4e00-\u9fa5`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\w]{7,100}$/];e(n).find(".input-field").each(function(t,n){r[0].rule.test(e(n).val().trim())&&(e(n).siblings(".error-tips").show().html(r[0].msg[t]),o=!1)}),r[1].test(e(n).find(".input-field").eq(0).val().trim())&&r[2].test(e(n).find(".input-field").eq(1).val().trim())&&r[3].test(e(n).find(".input-field").eq(2).val().trim())&&(o=!0),o&&this.ajaxRequest(this.ajax.url.addrUrl,"POST",{id:t,name:e(n).find(".input-field").eq(0).val(),phone:e(n).find(".input-field").eq(1).val(),address:e(n).find(".input-field").eq(2).val()}).then(function(e){e.status+0===200&&(i.html("地址添加成功").show(),setTimeout(function(){easyDialog.close()},2e3))}).catch(function(t){i.html("地址添加失败，请重试").show(),setTimeout(function(){e(n).find(".input-field").val(""),i.hide()},2e3)})},observeRecord:function(){var e=this,t=this;this.$ele.on("click",".record-btn",function(){e.ajaxRequest(t.ajax.url.recordUrl,"GET",{id:t.opts.id}).then(function(n){e.element.record=t.$ele.find(".record"),easyDialog.open({container:{header:"中奖纪录",content:(0,r.default)({records:n.data}),yesText:"确定",yesFn:function(){}}})}).catch(function(e){return console.log("中奖纪录获取异常"+e)})})},initData:function(){this.len=this.element.item.length,this.element.item.removeClass("active"),this.opts.index++,this.opts.index>this.len-1&&(this.opts.index=1),this.seq=this.$ele.find(".item-"+this.opts.index).data("seq"),this.$ele.find(".item-"+this.opts.index).addClass("active")},roll:function(e,t,n,i){var o=this,r=this;this.isLottery=!1,this.initData(),this.opts.times++;var s=this.opts.speed/this.opts.circle;if(this.opts.times>=this.opts.totleTimes&&this.opts.prize===this.seq){clearTimeout(this.timer),s=this.opts.speed/this.opts.circle,this.opts.prize=-1,this.opts.times=0,this.opts.circle=this.opts.totleTimes/(this.len-1)/2,this.isLottery=!0;var l=setTimeout(function(){e+0===0?easyDialog.open({container:{header:"提示",content:'<p class="lottery-tips">'+n+"</p>",yesText:"确定",yesFn:function(){clearTimeout(l)}}}):e+0===1?easyDialog.open({container:{header:"提示",content:'<p class="lottery-tips"><span>'+n+"</span></p>",noText:"取消",noFn:!0,yesText:"填写收货地址",yesFn:function(){return clearTimeout(l),easyDialog.open({container:{header:"+添加收货地址",content:(0,a.default)(),yesText:"确定",yesFn:function(){return r.saveAddress(i),!1}}}),!1}}}):e+0===2&&easyDialog.open({container:{header:"提示",content:'<p class="lottery-tips"><span>'+n+"</span></p>",yesText:"确定",yesFn:function(){clearTimeout(l)}}})},400)}else this.opts.times<this.opts.totleTimes/2?this.opts.index>=this.len-1&&this.opts.circle++:this.opts.times>this.opts.totleTimes/2&&this.opts.times<this.opts.totleTimes?this.opts.index>=this.len-1&&this.opts.circle--:this.opts.times===this.opts.totleTimes?this.opts.prize=t:this.opts.times>=this.opts.totleTimes&&(0===this.opts.prize&&this.opts.index===this.len-1||this.opts.prize===this.opts.index+1)&&(s+=80),this.timer=setTimeout(function(){o.roll(e,t,n,i)},s);return!1},action:function(){var t=this;this.$ele.on("click",".action",function(){t.isActive&&t.isLottery&&e.ajax({url:t.ajax.url.drawUrl,type:"GET",data:{id:t.opts.id},dataType:"json"}).then(function(e){if(e.status-0==204)easyDialog.open({container:{header:"提示",content:'<p class="lottery-tips">您还未登录，请前往登录</p>',yesText:"前往登录",yesFn:function(){window.location.href=t.opts.loginUrl}}});else if(e.status-0==406)easyDialog.open({container:{header:"提示",content:'<p class="lottery-tips">'+t.tips.ineligible_tips+"</p>",yesText:"确定",yesFn:function(){}}});else if(e.status-0==200){var n=[e.data.type,e.data.seq,e.data.tips,e.data.id],i=n[0],o=n[1],r=n[2],a=n[3];t.roll(i,o,r,a)}}).fail(function(e){console.log("抽奖环节数据获取异常"+e)})})}},e.fn.lottery=function(e,n){return new t(e,this)}}(jQuery)},function(e,t,n){},,function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(18),function(e,t){var n=e.document,o=n.documentElement,r=function(){e.easyDialog=function(){var r=n.body,a=!-[1],s=a&&/msie 6/.test(navigator.userAgent.toLowerCase()),l=1,c="cache"+(+new Date+"").slice(-8),u={},d=function(){};d.prototype={getOptions:function(e){var n,i={},o={container:null,overlay:!0,drag:!1,fixed:!0,follow:null,followX:0,followY:0,autoClose:0,lock:!1,callback:null};for(n in o)i[n]=e[n]!==t?e[n]:o[n];return d.data("options",i),i},setBodyBg:function(){"fixed"!==r.currentStyle.backgroundAttachment&&(r.style.backgroundImage="url(about:blank)",r.style.backgroundAttachment="fixed")},appendIframe:function(e){e.innerHTML='<iframe style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:-1;border:0 none;filter:alpha(opacity=0)"></iframe>'},setFollow:function(e,t,i,o){t="string"==typeof t?n.getElementById(t):t;var r=e.style;r.position="absolute",r.left=d.getOffset(t,"left")+i+"px",r.top=d.getOffset(t,"top")+o+"px"},setPosition:function(e,t){var n=e.style;n.position=s?"absolute":t?"fixed":"absolute",t?(s?n.setExpression("top",'fuckIE6=document.documentElement.scrollTop+document.documentElement.clientHeight/2+"px"'):n.top="50%",n.left="50%"):(s&&n.removeExpression("top"),n.top=o.clientHeight/2+d.getScroll("top")+"px",n.left=o.clientWidth/2+d.getScroll("left")+"px")},createOverlay:function(){var e=n.createElement("div"),t=e.style;return t.cssText="margin:0;padding:0;border:none;width:100%;height:100%;background:#333;opacity:0.6;filter:alpha(opacity=60);z-index:9999;position:fixed;top:0;left:0;",s&&(r.style.height="100%",t.position="absolute",t.setExpression("top",'fuckIE6=document.documentElement.scrollTop+"px"')),e.id="overlay",e},createDialogBox:function(){var e=n.createElement("div");return e.style.cssText="margin:0;padding:0;border:none;z-index:10000;",e.id="easyDialogBox",e},createDialogWrap:function(e){var t=e.header?'<h4 class="easyDialog_title" id="easyDialogTitle"><a href="javascript:void(0)" title="关闭窗口" class="close_btn" id="closeBtn">&times;</a>'+e.header+"</h4>":"",i="function"==typeof e.yesFn?'<button class="btn_highlight" id="easyDialogYesBtn">'+("string"==typeof e.yesText?e.yesText:"确定")+"</button>":"",o="function"==typeof e.noFn||!0===e.noFn?'<button class="btn_normal" id="easyDialogNoBtn">'+("string"==typeof e.noText?e.noText:"取消")+"</button>":"",r=""===i&&""===o?"":'<div class="easyDialog_footer">'+o+i+"</div>",a=['<div class="easyDialog_content">',t,'<div class="easyDialog_text">'+e.content+"</div>",r,"</div>"].join(""),s=n.getElementById("easyDialogWrapper");return s||((s=n.createElement("div")).id="easyDialogWrapper",s.className="easyDialog_wrapper"),s.innerHTML=a.replace(/<[\/]*script[\s\S]*?>/gi,""),s}},d.data=function(n,o,r){if("string"==typeof n)return o!==t&&(u[n]=o),u[n];if("object"===(void 0===n?"undefined":i(n))){var a=n===e?0:9===n.nodeType?1:n[c]?n[c]:n[c]=++l,s=u[a]?u[a]:u[a]={};return r!==t&&(s[o]=r),s[o]}},d.removeData=function(n,o){if("string"==typeof n)delete u[n];else if("object"===(void 0===n?"undefined":i(n))){var r=n===e?0:9===n.nodeType?1:n[c];if(r===t)return;var a=function(){if(delete u[r],!(r<=1))try{delete n[c]}catch(e){n.removeAttribute(c)}};o?(delete u[r][o],function(e){var t;for(t in e)return!1;return!0}(u[r])&&a()):a()}},d.event={bind:function(e,t,n){var i=d.data(e,"e"+t)||d.data(e,"e"+t,[]);if(i.push(n),1===i.length){var o=this.eventHandler(e);d.data(e,t+"Handler",o),e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)}},unbind:function(e,n,i){var o=d.data(e,"e"+n);if(o){if(i)for(var r=o.length-1,a=o[r];r>=0;r--)a===i&&o.splice(r,1);else o=t;if(!o||!o.length){var s=d.data(e,n+"Handler");e.addEventListener?e.removeEventListener(n,s,!1):e.attachEvent&&e.detachEvent("on"+n,s),d.removeData(e,n+"Handler"),d.removeData(e,"e"+n)}}},eventHandler:function(t){return function(n){for(var i,o=(n=d.event.fixEvent(n||e.event)).type,r=d.data(t,"e"+o),a=0;i=r[a++];)!1===i.call(t,n)&&(n.preventDefault(),n.stopPropagation())}},fixEvent:function(e){if(e.target)return e;var t,n={};for(t in n.target=e.srcElement||document,n.preventDefault=function(){e.returnValue=!1},n.stopPropagation=function(){e.cancelBubble=!0},e)n[t]=e[t];return n}},d.capitalize=function(e){var t=e.charAt(0);return t.toUpperCase()+e.replace(t,"")},d.getScroll=function(e){var t=this.capitalize(e);return o["scroll"+t]||r["scroll"+t]},d.getOffset=function(e,t){var n=this.capitalize(t),i=o["client"+n]||r["client"+n]||0,a=this.getScroll(t),s=e.getBoundingClientRect();return Math.round(s[t])+a-i},d.drag=function(t,i){var r="getSelection"in e?function(){e.getSelection().removeAllRanges()}:function(){try{n.selection.empty()}catch(e){}},l=this,c=l.event,u=!1,f=a?t:n,p="fixed"===i.style.position,h=d.data("options").fixed;c.bind(t,"mousedown",function(e){u=!0;var n=l.getScroll("top"),r=l.getScroll("left"),y=p?0:r,g=p?0:n;d.data("dragData",{x:e.clientX-l.getOffset(i,"left")+(p?r:0),y:e.clientY-l.getOffset(i,"top")+(p?n:0),el:y,et:g,er:y+o.clientWidth-i.offsetWidth,eb:g+o.clientHeight-i.offsetHeight}),a&&(s&&h&&i.style.removeExpression("top"),t.setCapture()),c.bind(f,"mousemove",m),c.bind(f,"mouseup",v),a&&c.bind(t,"losecapture",v),e.stopPropagation(),e.preventDefault()});var m=function(e){if(u){r();var t=d.data("dragData"),n=e.clientX-t.x,o=e.clientY-t.y,a=t.et,s=t.er,l=t.eb,c=t.el,f=i.style;f.marginLeft=f.marginTop="0px",f.left=(n<=c?c:n>=s?s:n)+"px",f.top=(o<=a?a:o>=l?l:o)+"px",e.stopPropagation()}},v=function(e){if(u=!1,a&&c.unbind(t,"losecapture",arguments.callee),c.unbind(f,"mousemove",m),c.unbind(f,"mouseup",arguments.callee),a&&(t.releaseCapture(),s&&h)){var n=parseInt(i.style.top)-l.getScroll("top");i.style.setExpression("top","fuckIE6=document.documentElement.scrollTop+"+n+'+"px"')}e.stopPropagation()}};var f,p=function(e){27===e.keyCode&&m.close()},h=function(){f&&(clearTimeout(f),f=t)},m={open:function(){var t,i,o,a,l=new d,c=l.getOptions(arguments[0]||{}),u=d.event,m=this;if(h(),c.overlay&&((t=n.getElementById("overlay"))||(t=l.createOverlay(),r.appendChild(t),s&&l.appendIframe(t)),t.style.display="block"),s&&l.setBodyBg(),(i=n.getElementById("easyDialogBox"))||(i=l.createDialogBox(),r.appendChild(i)),c.follow?(l.setFollow(i,c.follow,c.followX,c.followY),t&&(t.style.display="none"),c.fixed=!1):l.setPosition(i,c.fixed),i.style.display="block",!c.follow&&!c.fixed){var v=function(){l.setPosition(i,!1)};u.bind(e,"resize",v),d.data("resize",v)}o="string"==typeof c.container?n.getElementById(c.container):l.createDialogWrap(c.container),(a=i.getElementsByTagName("*")[0])?a&&o!==a&&(a.style.display="none",r.appendChild(a),i.appendChild(o)):i.appendChild(o),o.style.display="block";var y=o.offsetWidth,g=o.offsetHeight;o.style.marginTop=o.style.marginRight=o.style.marginBottom=o.style.marginLeft="0px",c.follow?i.style.marginLeft=i.style.marginTop="0px":(i.style.marginLeft="-"+y/2+"px",i.style.marginTop="-"+g/2+"px"),s&&!c.overlay&&(i.style.width=y+"px",i.style.height=g+"px");var _=n.getElementById("closeBtn"),b=n.getElementById("easyDialogTitle"),w=n.getElementById("easyDialogYesBtn"),x=n.getElementById("easyDialogNoBtn");if(w&&u.bind(w,"click",function(e){!1!==c.container.yesFn.call(m,e)&&m.close()}),x){var T=function(e){!0!==c.container.noFn&&!1===c.container.noFn.call(m,e)||m.close()};u.bind(x,"click",T),_&&u.bind(_,"click",T)}else _&&u.bind(_,"click",m.close);c.lock||u.bind(n,"keyup",p),c.autoClose&&"number"==typeof c.autoClose&&(f=setTimeout(m.close,c.autoClose)),c.drag&&b&&(b.style.cursor="move",d.drag(b,i)),d.data("dialogElements",{overlay:t,dialogBox:i,closeBtn:_,dialogTitle:b,dialogYesBtn:w,dialogNoBtn:x})},close:function(){var t=d.data("options"),i=d.data("dialogElements"),o=d.event;h();try{t.overlay&&i.overlay&&(i.overlay.style.display="none")}catch(e){}if(i.dialogBox.style.display="none",s&&i.dialogBox.style.removeExpression("top"),i.closeBtn&&o.unbind(i.closeBtn,"click"),i.dialogTitle&&o.unbind(i.dialogTitle,"mousedown"),i.dialogYesBtn&&o.unbind(i.dialogYesBtn,"click"),i.dialogNoBtn&&o.unbind(i.dialogNoBtn,"click"),!t.follow&&!t.fixed){var r=d.data("resize");o.unbind(e,"resize",r),d.removeData("resize")}t.lock||o.unbind(n,"keyup",p),"function"==typeof t.callback&&t.callback.call(m),d.removeData("options"),d.removeData("dialogElements")}};return m}()};!function(){if(n.body)r();else if(n.addEventListener)n.addEventListener("DOMContentLoaded",function(){n.removeEventListener("DOMContentLoaded",arguments.callee,!1),r()},!1),e.addEventListener("load",r,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&(n.detachEvent("onreadystatechange",arguments.callee),r())}),e.attachEvent("onload",r);var t=!1;try{t=null==e.frameElement}catch(e){}o.doScroll&&t&&function e(){if(!n.body){try{o.doScroll("left")}catch(t){return void setTimeout(e,1)}r()}}()}}()}(window,void 0)},function(e,t,n){},,function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="newaddress-ctn">\r\n    <div class="address-group input-group clearfix">\r\n        <label for="name">\r\n            <i class="icon-stars"></i>收货人姓名：\r\n        </label>\r\n        <input id="name" name="name" type="text" sel-id="addr-text-name" class="input-text input-field" data-action="name" data-success="false" placeholder="请填写真实姓名">\r\n        <p class="accout-error error-tips"></p>\r\n    </div>\r\n    <div class="address-group input-group clearfix">\r\n        <label for="tel">\r\n            <i class="icon-stars"></i>手机号码：\r\n        </label>\r\n        <input id="tel" name="tel" type="text" sel-id="addr-text-tel" class="input-text input-field" data-action="tel" data-success="false" placeholder="请输入手机号码">\r\n        <p class="accout-error error-tips"></p>\r\n    </div>\r\n    <div class="address-group input-group clearfix">\r\n        <label for="address">\r\n            <i class="icon-stars"></i>收货地址：\r\n        </label>\r\n        <textarea id="address" name="address" rows="2" cols="60" sel-id="addr-text-address" data-action="addr" data-success="false" placeholder="请填写详细地址，确保准确送达"\r\n            class="input-textarea input-field"></textarea>\r\n        <p class="accout-error error-tips"></p>\r\n    </div>\r\n</div>\r\n<div class="fixed-tips"></div>\r\n';return __p}}]);